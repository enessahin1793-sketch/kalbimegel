<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalbim Sana KoÅŸtu ğŸ’–</title>

<style>
  body { margin:0; overflow:hidden; background:#000; font-family:Arial,sans-serif; }
  #ui {
    position:fixed;
    top:15px;
    width:100%;
    text-align:center;
    color:white;
    font-size:20px;
    z-index:10;
  }
  #final {
    display:none;
    position:fixed;
    inset:0;
    background:rgba(255,182,193,0.95);
    text-align:center;
    color:#c2185b;
    z-index:20;
    flex-direction:column;
    align-items:center;
    justify-content:center;
  }
  #final h1 { font-size:42px; margin-bottom:10px; }
  #final p { font-size:22px; }
</style>
</head>

<body>

<div id="ui">Dokun / Space â†’ ZÄ±pla ğŸ’•</div>

<div id="final">
  <h1>Enes â¤ï¸ Yasemin</h1>
  <p>Kalbim hep sana koÅŸtuâ€¦ ğŸ’Œ</p>
</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/audio/2023/03/27/audio_0b2f0e1d9b.mp3" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
/* SCENE */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xffe6ee);

/* CAMERA */
const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
camera.position.set(0,4,7);

/* RENDER */
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

/* LIGHT */
scene.add(new THREE.AmbientLight(0xffffff,0.9));
const sun = new THREE.DirectionalLight(0xffffff,1);
sun.position.set(10,20,10);
scene.add(sun);

/* GROUND */
const ground = new THREE.Mesh(
  new THREE.BoxGeometry(300,1,12),
  new THREE.MeshStandardMaterial({color:0x9be7a5})
);
ground.position.y = -0.5;
scene.add(ground);

/* GIRL */
const girl = new THREE.Mesh(
  new THREE.BoxGeometry(0.8,1.5,0.8),
  new THREE.MeshStandardMaterial({color:0xff69b4})
);
girl.position.y = 0.75;
scene.add(girl);

/* HEART */
const heart = new THREE.Mesh(
  new THREE.SphereGeometry(0.6,32,32),
  new THREE.MeshStandardMaterial({color:0xff1744})
);
heart.position.set(50,1,0);
scene.add(heart);

/* HEART PARTICLES */
const hearts = [];
function spawnHeart(){
  const h = new THREE.Mesh(
    new THREE.SphereGeometry(0.15,16,16),
    new THREE.MeshStandardMaterial({color:0xff4d6d})
  );
  h.position.copy(heart.position);
  h.velocity = new THREE.Vector3(
    (Math.random()-0.5)*0.2,
    Math.random()*0.3,
    (Math.random()-0.5)*0.2
  );
  scene.add(h);
  hearts.push(h);
}

/* PHYSICS */
let velY = 0;
let onGround = true;
let speed = 0.22; // hÄ±zlÄ± ğŸ’¨
let finished = false;

/* MUSIC START */
const music = document.getElementById("music");
document.body.addEventListener("click",()=>music.play(),{once:true});

/* JUMP */
function jump(){
  if(onGround && !finished){
    velY = 0.28;
    onGround = false;
  }
}
addEventListener("click", jump);
addEventListener("touchstart", jump);
addEventListener("keydown", e=>{ if(e.code==="Space") jump(); });

/* LOOP */
function animate(){
  if(finished) return;
  requestAnimationFrame(animate);

  girl.position.x += speed;

  velY -= 0.013;
  girl.position.y += velY;
  if(girl.position.y <= 0.75){
    girl.position.y = 0.75;
    velY = 0;
    onGround = true;
  }

  camera.position.x = girl.position.x + 7;

  heart.scale.setScalar(1 + Math.sin(Date.now()*0.005)*0.1);

  // HEART HIT
  if(girl.position.distanceTo(heart.position) < 1){
    finished = true;
    for(let i=0;i<30;i++) spawnHeart();
    document.getElementById("final").style.display="flex";
  }

  hearts.forEach(h=>{
    h.position.add(h.velocity);
    h.velocity.y -= 0.01;
  });

  renderer.render(scene,camera);
}
animate();

/* RESIZE */
addEventListener("resize",()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>

</body>
</html>
