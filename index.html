<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalbime KoÅŸ ğŸ’–</title>

<style>
  body { margin:0; overflow:hidden; background:#000; font-family:Arial }

  #info {
    position:fixed;
    top:10px;
    width:100%;
    text-align:center;
    color:#fff;
    z-index:5;
  }

  /* ğŸ”’ BAÅTA TAMAMEN KAPALI */
  #final {
    display:none;
    position:fixed;
    inset:0;
    background:rgba(255,182,193,0.96);
    align-items:center;
    justify-content:center;
    flex-direction:column;
    color:#c2185b;
    z-index:20;
  }

  #final h1 { font-size:42px; margin:0 }
  #final p { font-size:20px; margin-top:10px }
</style>
</head>

<body>

<div id="info">Dokun / Space â†’ ZÄ±pla ğŸ’•</div>

<!-- ğŸš« OYUN BAÅINDA GÃ–RÃœNMEZ -->
<div id="final">
  <h1>Enes â¤ï¸ Yasemin</h1>
  <p>Kalbim sana koÅŸtuâ€¦ ğŸ’Œ</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
/* SCENE */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xffe6ee);

/* CAMERA */
const camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
camera.position.set(-3, 4, 8);

/* RENDER */
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

/* LIGHT */
scene.add(new THREE.AmbientLight(0xffffff, 0.9));
const sun = new THREE.DirectionalLight(0xffffff, 1);
sun.position.set(10,20,10);
scene.add(sun);

/* GROUND */
const ground = new THREE.Mesh(
  new THREE.BoxGeometry(300,1,20),
  new THREE.MeshStandardMaterial({color:0x9be7a5})
);
ground.position.y = -0.5;
scene.add(ground);

/* GIRL */
const girl = new THREE.Group();

const head = new THREE.Mesh(
  new THREE.SphereGeometry(0.45,32,32),
  new THREE.MeshStandardMaterial({color:0xffe0bd})
);
head.position.y = 2.1;
girl.add(head);

const hair = new THREE.Mesh(
  new THREE.SphereGeometry(0.48,32,32),
  new THREE.MeshStandardMaterial({color:0x3b2f2f})
);
hair.position.y = 2.25;
girl.add(hair);

const dress = new THREE.Mesh(
  new THREE.ConeGeometry(0.6,1.4,32),
  new THREE.MeshStandardMaterial({color:0xff69b4})
);
dress.position.y = 1.2;
girl.add(dress);

const legGeo = new THREE.BoxGeometry(0.2,0.9,0.2);
const legMat = new THREE.MeshStandardMaterial({color:0x333});
const legL = new THREE.Mesh(legGeo, legMat);
const legR = new THREE.Mesh(legGeo, legMat);
legL.position.set(-0.18,0.45,0);
legR.position.set(0.18,0.45,0);
girl.add(legL, legR);

scene.add(girl);

/* HEART */
const heart = new THREE.Mesh(
  new THREE.SphereGeometry(0.7,32,32),
  new THREE.MeshStandardMaterial({color:0xff1744})
);
heart.position.set(80,1,0);
scene.add(heart);

/* GAME STATE */
let speed = 0.12;
let velY = 0;
let gravity = 0.01;
let jumpPower = 0.32;
let onGround = true;
let finished = false;
let t = 0;

/* INPUT */
function jump(){
  if(onGround && !finished){
    velY = jumpPower;
    onGround = false;
  }
}
addEventListener("click", jump);
addEventListener("touchstart", jump);
addEventListener("keydown", e => { if(e.code==="Space") jump(); });

/* LOOP */
function animate(){
  requestAnimationFrame(animate);

  if(!finished){
    girl.position.x += speed;

    velY -= gravity;
    girl.position.y += velY;
    if(girl.position.y <= 0){
      girl.position.y = 0;
      velY = 0;
      onGround = true;
    }

    t += 0.15;
    legL.rotation.x = Math.sin(t)*0.8;
    legR.rotation.x = -Math.sin(t)*0.8;

    camera.position.x = girl.position.x - 5;
    camera.lookAt(girl.position.x + 2, 1.5, 0);

    /* ğŸ’– SADECE BURADA AÃ‡ILIYOR */
    if(girl.position.distanceTo(heart.position) < 1.2){
      finished = true;
      document.getElementById("final").style.display = "flex";
    }
  }

  renderer.render(scene, camera);
}
animate();

/* RESIZE */
addEventListener("resize",()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
