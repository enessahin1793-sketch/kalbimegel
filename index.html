<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Kalbime Ko≈ü üíñ</title>
<style>
  body{margin:0;overflow:hidden;background:#000;font-family:Arial,sans-serif}
  #hint{
    position:fixed;top:12px;width:100%;text-align:center;
    color:#fff;font-size:18px;z-index:5
  }
  #final{
    display:none;position:fixed;inset:0;
    background:rgba(255,182,193,.96);
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    color:#c2185b;z-index:10;text-align:center
  }
  #final h1{font-size:44px;margin:0}
  #final p{font-size:22px;margin-top:10px}
</style>
</head>
<body>

<div id="hint">Dokun / Space ‚Üí Zƒ±pla üíï</div>

<div id="final">
  <h1>Enes ‚ù§Ô∏è Yasemin</h1>
  <p>Kalbim sana ko≈ütu‚Ä¶ üíå</p>
</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/audio/2023/03/27/audio_0b2f0e1d9b.mp3" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script>
/* ================= SCENE ================= */
const scene=new THREE.Scene();
scene.background=new THREE.Color(0xffe6ee);

/* CAMERA */
const camera=new THREE.PerspectiveCamera(75,innerWidth/innerHeight,.1,1000);
camera.position.set(0,4,7);

/* RENDER */
const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

/* LIGHT */
scene.add(new THREE.AmbientLight(0xffffff,.9));
const sun=new THREE.DirectionalLight(0xffffff,1);
sun.position.set(10,20,10);scene.add(sun);

/* GROUND */
const ground=new THREE.Mesh(
  new THREE.BoxGeometry(400,1,14),
  new THREE.MeshStandardMaterial({color:0x9be7a5})
);
ground.position.y=-.5;scene.add(ground);

/* ================= GIRL MODEL ================= */
const girl=new THREE.Group();

// head
const head=new THREE.Mesh(
  new THREE.SphereGeometry(.35,32,32),
  new THREE.MeshStandardMaterial({color:0xffe0bd})
);
head.position.y=1.9;girl.add(head);

// hair
const hair=new THREE.Mesh(
  new THREE.SphereGeometry(.38,32,32),
  new THREE.MeshStandardMaterial({color:0x3b2f2f})
);
hair.position.y=2.05;girl.add(hair);

// dress
const dress=new THREE.Mesh(
  new THREE.ConeGeometry(.5,1.1,32),
  new THREE.MeshStandardMaterial({color:0xff69b4})
);
dress.position.y=1.2;girl.add(dress);

// legs
const legGeo=new THREE.BoxGeometry(.18,.75,.18);
const legMat=new THREE.MeshStandardMaterial({color:0x333});
const legL=new THREE.Mesh(legGeo,legMat);
const legR=new THREE.Mesh(legGeo,legMat);
legL.position.set(-.15,.35,0);
legR.position.set(.15,.35,0);
girl.add(legL,legR);

scene.add(girl);

/* ================= HEART ================= */
const heart=new THREE.Mesh(
  new THREE.SphereGeometry(.6,32,32),
  new THREE.MeshStandardMaterial({color:0xff1744})
);
heart.position.set(60,1,0);scene.add(heart);

/* HEART PARTICLES */
const particles=[];
function spawnParticles(){
  for(let i=0;i<40;i++){
    const p=new THREE.Mesh(
      new THREE.SphereGeometry(.14,16,16),
      new THREE.MeshStandardMaterial({color:0xff4d6d})
    );
    p.position.copy(heart.position);
    p.vel=new THREE.Vector3(
      (Math.random()-.5)*.25,
      Math.random()*.35,
      (Math.random()-.5)*.25
    );
    scene.add(p);particles.push(p);
  }
}

/* ================= PHYSICS ================= */
let velY=0,onGround=true;
let speed=.24; // hƒ±zlƒ± üí®
let time=0,finished=false;
let slowmo=1;

/* MUSIC (first interaction) */
const music=document.getElementById("music");
document.body.addEventListener("click",()=>music.play(),{once:true});

/* JUMP */
function jump(){
  if(onGround&&!finished){
    velY=.3;onGround=false;
  }
}
addEventListener("click",jump);
addEventListener("touchstart",jump);
addEventListener("keydown",e=>{if(e.code==="Space")jump();});

/* ================= LOOP ================= */
function animate(){
  requestAnimationFrame(animate);
  if(finished) return;

  time+=.15*slowmo;

  // run
  girl.position.x+=speed*slowmo;

  // jump physics
  velY-=.013*slowmo;
  girl.position.y+=velY;
  if(girl.position.y<=0){
    girl.position.y=0;velY=0;onGround=true;
  }

  // legs animation
  legL.rotation.x=Math.sin(time)*.9;
  legR.rotation.x=-Math.sin(time)*.9;

  // camera follow
  camera.position.x=girl.position.x+7;

  // heart pulse
  heart.scale.setScalar(1+Math.sin(Date.now()*0.006)*.12);

  // collision
  if(girl.position.distanceTo(heart.position)<1){
    finished=true;
    slowmo=.2; // slow motion üíû
    spawnParticles();
    setTimeout(()=>{
      document.getElementById("final").style.display="flex";
    },600);
  }

  // particles update
  particles.forEach(p=>{
    p.position.add(p.vel);
    p.vel.y-=.01;
  });

  renderer.render(scene,camera);
}
animate();

/* RESIZE */
addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
